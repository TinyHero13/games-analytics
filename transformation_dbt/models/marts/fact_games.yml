version: 2

models:
  - name: fact_games
    description: "Tabela fato contendo jogos com métricas e chaves para as dimensões"
    columns:
      - name: igdb_id
        description: "Identificador único do jogo no IGDB"
        tests:
          - not_null
          - unique

      - name: game_name
        description: "Nome do jogo"
        tests:
          - not_null

      - name: summary
        description: "Resumo/descrição do jogo"

      - name: total_rating
        description: "Nota total do jogo"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0
              max_value: 100

      - name: total_rating_count
        description: "Número de avaliações para a nota total"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: release_date
        description: "Data de lançamento do jogo"

      - name: total_companies
        description: "Número total de empresas envolvidas com o jogo"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: total_developers
        description: "Número total de desenvolvedoras do jogo"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: total_publishers
        description: "Número total de publishers do jogo"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: primary_developer_key
        description: "Chave da empresa desenvolvedora principal"
        tests:
          - relationships:
              to: ref('dim_companies')
              field: company_key

      - name: primary_publisher_key
        description: "Chave da empresa publisher principal"
        tests:
          - relationships:
              to: ref('dim_companies')
              field: company_key

      - name: total_genres
        description: "Número total de gêneros do jogo"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: genre_keys
        description: "Array de chaves de gêneros do jogo"

      - name: total_keywords
        description: "Número total de palavras-chave do jogo"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: total_languages
        description: "Número total de idiomas suportados"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: audio_languages
        description: "Número de idiomas com suporte de áudio"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: subtitle_languages
        description: "Número de idiomas com suporte de legendas"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: interface_languages
        description: "Número de idiomas com suporte de interface"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: total_game_modes
        description: "Número total de modos de jogo"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: has_single_player
        description: "Indica se o jogo tem modo single player"
        tests:
          - accepted_values:
              values: [0, 1]

      - name: has_multiplayer
        description: "Indica se o jogo tem modo multiplayer"
        tests:
          - accepted_values:
              values: [0, 1]

      - name: has_coop
        description: "Indica se o jogo tem modo cooperativo"
        tests:
          - accepted_values:
              values: [0, 1]

      - name: game_mode_keys
        description: "Array de chaves de modos de jogo"

      - name: total_platforms
        description: "Número total de plataformas do jogo"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: platform_keys
        description: "Array de chaves de plataformas"

      - name: total_themes
        description: "Número total de temas do jogo"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: twitch_viewers
        description: "Média de espectadores na Twitch"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: twitch_channels
        description: "Média de canais transmitindo o jogo na Twitch"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: twitch_rank
        description: "Ranking de popularidade na Twitch"
        tests:
          - dbt_utils.accepted_range:
              min_value: 1

      - name: hours_watched
        description: "Total de horas assistidas na Twitch"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: twitch_tracking_days
        description: "Número de dias acompanhados na Twitch"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: daily_hours_watched
        description: "Média de horas assistidas por dia na Twitch"
        tests:
          - dbt_utils.accepted_range:
              min_value: 0

      - name: has_twitch_presence
        description: "Indica se o jogo tem presença na Twitch"

      - name: updated_at
        description: "Timestamp da última atualização do registro"
        tests:
          - not_null
